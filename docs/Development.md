# ScholarPipe å¼€å‘æ–‡æ¡£

> å­¦æœ¯èµ„è®¯èšåˆ + AI æ‘˜è¦æ—¥æŠ¥ç³»ç»Ÿ

---

## é¡¹ç›®çŠ¶æ€

**å½“å‰ç‰ˆæœ¬**: v0.5.0
**æœ€åæ›´æ–°**: 2025-12-20

### å·²å®ŒæˆåŠŸèƒ½

| æ¨¡å— | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| Pipeline | 7 æ­¥æµæ°´çº¿å®Œæ•´å®ç° | âœ… |
| æ•°æ®æº | 75 ä¸ª RSS + PubMed + 3 ä¸ª API æ¥æº | âœ… |
| API æº | bioRxiv API + OpenAlex + Europe PMC (30å¤©çª—å£) | âœ… |
| è§£æå™¨ | 7 ç§å·®å¼‚åŒ–è§£æå™¨ | âœ… |
| è¿‡æ»¤ | åŒå±‚æ··åˆè¿‡æ»¤ (å…³é”®è¯ + è¯­ä¹‰) | âœ… |
| LLM | ä¸­æ–‡æ‘˜è¦ç”Ÿæˆ (å¤š provider) | âœ… |
| API | RESTful åç«¯æ¥å£ | âœ… |
| ç¼“å­˜ | RSS/API 5h ç¼“å­˜ | âœ… |
| ç¼“å­˜ | Embedding + LLM ç¼“å­˜ (å« DOI è·¨æºæŸ¥æ‰¾) | âœ… |
| è¿›åº¦ | Pipeline å®æ—¶è¿›åº¦è¿½è¸ª | âœ… |
| å½’æ¡£ | å¤šç‰ˆæœ¬å½’æ¡£ç³»ç»Ÿ | âœ… |
| éƒ¨ç½² | systemd æœåŠ¡ | âœ… |
| è®¤è¯ | å¾®ä¿¡å°ç¨‹åºé™é»˜ç™»å½• | âœ… |
| æ”¶è— | æ–‡ç« æ”¶è—åŠŸèƒ½ (è‡ªåŠ¨è¡¥å……æ–‡ç« ä¿¡æ¯) | âœ… |
| æ¸…ç† | è‡ªåŠ¨æ¸…ç†ä¸­é—´æ•°æ® + Raw + æ—¥å¿— | âœ… |
| ä¸ªæ€§åŒ– | ç”¨æˆ·é…ç½® + ä¸ªæ€§åŒ–æ’åº | âœ… |
| ç”¨æˆ·éš”ç¦» | æŒ‰ç”¨æˆ·éš”ç¦» seen è®°å½• | âœ… |

---

## ç³»ç»Ÿæ¶æ„

### æµæ°´çº¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1_aggregate â”‚â”€â”€â–ºâ”‚  2_clean    â”‚â”€â”€â–ºâ”‚  3_dedup    â”‚â”€â”€â–ºâ”‚  4_enrich  â”‚
â”‚   (èšåˆ)    â”‚   â”‚  (æ¸…æ´—)     â”‚   â”‚ (æŒ‡çº¹å»é‡)  â”‚   â”‚ (è¡¥å……æ‘˜è¦) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                                     â”‚
       â–¼                                                     â–¼
  [5h ç¼“å­˜]                                            [PubMed API]
                                                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  7_deliver  â”‚â—„â”€â”€â”‚   6_llm     â”‚â—„â”€â”€â”‚  5_filter   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   (è¾“å‡º)    â”‚   â”‚  (AIæ‘˜è¦)   â”‚   â”‚ (è¯­ä¹‰è¿‡æ»¤)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                  â”‚
       â–¼                â–¼                  â–¼
   [Archive]      [LLM Cache]      [Embedding Cache]
                                          â”‚
                                          â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  Candidate Pool   â”‚ â† Layer1 é€šè¿‡çš„æ–‡ç« 
                              â”‚ (ä¸ªæ€§åŒ–é‡æ’åº)    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â–¼                       â–¼
                       [User Config]           [Personalized API]
                       ç”¨æˆ·è¯­ä¹‰é”šç‚¹              /api/daily?personalized=true
                       VIP å…³é”®è¯
```

### æ•°æ®æµæ¼æ–—

```
~2000+ items (75 RSS + 3 API æ¥æºï¼Œ30å¤©çª—å£)
    â”‚
    â–¼ [5h å†…å¤ç”¨ç¼“å­˜]
3_dedup: æŒ‡çº¹å»é‡ + seen è¿‡æ»¤
    â”‚
    â–¼ ~300 items (å»é‡åï¼Œæ–°å¢é‡)
5_filter Layer1: ç”Ÿç‰©å­¦å…³é”®è¯
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                     â–¼
    â–¼ ~100 items                   [Candidate Pool]
5_filter Layer2: è¯­ä¹‰ç›¸ä¼¼åº¦            ä¿å­˜ä¾›ä¸ªæ€§åŒ–ä½¿ç”¨
    â”‚
    â–¼ ~30 items (threshold 0.50)
6_llm: Top 20 ç”Ÿæˆæ‘˜è¦
    â”‚
    â–¼
7_deliver: JSON + HTML + MD + Archive

ä¸ªæ€§åŒ–è¯·æ±‚:
    â”‚
Historical Candidate Pool (1 å¹´ï¼Œå»é‡)
    â”‚
    â–¼ ç”¨æˆ·è¯­ä¹‰é”šç‚¹ + VIP å…³é”®è¯é‡æ’åº
PersonalizedRanker.rerank()
    â”‚
    â–¼ Top 20 (æŒ‰ç”¨æˆ·å…´è¶£æ’åº)
æŒ‰éœ€ç”Ÿæˆ LLM æ‘˜è¦ (ç¼“å­˜ä¼˜å…ˆ)
```

### è¯„åˆ†æœºåˆ¶

```
final_score = base_score Ã— tier_mult Ã— coverage_mult Ã— vip_mult Ã— neg_penalty

- base_score: ä¸æœ€ä½³è¯­ä¹‰é”šç‚¹çš„ä½™å¼¦ç›¸ä¼¼åº¦ (0-1)
- tier_mult: å‘½ä¸­çš„ anchor å±‚çº§åŠ æˆ (tier1=1.20, tier2=1.10, tier3=1.00)
- coverage_mult: è·¨å±‚çº§è¦†ç›–å¥–åŠ± (tier1=+12%, tier2=+6%, tier3=+3%)
- vip_mult: VIP å…³é”®è¯åŠ æˆ (tier1=1.50, tier2=1.30, tier3=1.15)
- neg_penalty: è´Ÿå‘é”šç‚¹æƒ©ç½š (ä¸´åºŠ/å†œä¸š/ç»¼è¿°ç­‰é™ 40%)

æ³¨æ„: æœ€ç»ˆåˆ†æ•°å¯è¶…è¿‡ 100%ï¼Œä½“ç° VIP åŠ æˆæ•ˆæœ
```

---

## API ç³»ç»Ÿ

**Base URL**: `http://localhost:8080`

### å…¬å¼€æ¥å£

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/daily` | GET | è·å–æ—¥æŠ¥ |
| `/api/articles/{id}` | GET | æ–‡ç« è¯¦æƒ… (æ”¯æŒå†å²æ—¥æœŸ) |
| `/api/archive/dates` | GET | å†å²ç‰ˆæœ¬åˆ—è¡¨ (æ‰å¹³) |
| `/api/archive/stats` | GET | å½’æ¡£ç»Ÿè®¡ |
| `/api/trigger` | POST | è§¦å‘ Pipeline |
| `/api/trigger/status` | GET | è¿è¡ŒçŠ¶æ€ + å®æ—¶è¿›åº¦ |
| `/api/auth/wx-login` | POST | å¾®ä¿¡ç™»å½• |

### éœ€è®¤è¯æ¥å£

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/auth/me` | GET | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| `/api/bookmarks` | GET | è·å–æ”¶è—åˆ—è¡¨ |
| `/api/bookmarks/{id}` | POST | æ·»åŠ æ”¶è— (è‡ªåŠ¨è¡¥å……æ–‡ç« ä¿¡æ¯) |
| `/api/bookmarks/{id}` | DELETE | å–æ¶ˆæ”¶è— |
| `/api/bookmarks/{id}/status` | GET | æ£€æŸ¥æ”¶è—çŠ¶æ€ |
| `/api/config` | GET | è·å–ç”¨æˆ·é…ç½® |
| `/api/config` | PUT | å®Œæ•´æ›´æ–°é…ç½® |
| `/api/config/vip-keywords` | PATCH | æ›´æ–° VIP å…³é”®è¯ |
| `/api/config/semantic-anchors` | PATCH | æ›´æ–°è¯­ä¹‰é”šç‚¹ |
| `/api/config/reset` | POST | é‡ç½®ä¸ºé»˜è®¤é…ç½® |
| `/api/config/defaults` | GET | è·å–é»˜è®¤é…ç½®å€¼ |

è¯¦ç»†æ–‡æ¡£: [API.md](API.md)

---

## ç¼“å­˜ç­–ç•¥

| ç¼“å­˜ç±»å‹ | ä½ç½® | TTL | è¯´æ˜ |
|----------|------|-----|------|
| RSS/API | `data/raw/{date}/` | 5h | é¿å…é¢‘ç¹è¯·æ±‚æ•°æ®æº |
| Embedding | `data/embedding_cache.db` | æ°¸ä¹… | æ–‡æœ¬å‘é‡ç¼“å­˜ (text_hash + DOI) |
| LLM | `data/llm_cache.db` | æ°¸ä¹… | æ‘˜è¦ç»“æœç¼“å­˜ (DOI ä¸º key) |
| Seen | `data/seen/{user}.json` | 7 å¤© | å»é‡æŒ‡çº¹è®°å½• (æŒ‰ç”¨æˆ·éš”ç¦») |

### DOI è·¨æºç¼“å­˜

åŒä¸€ç¯‡è®ºæ–‡å¯èƒ½ä»å¤šä¸ªæ¥æºè·å–ï¼ˆå¦‚ bioRxiv RSS + Europe PMC APIï¼‰ï¼Œé€šè¿‡ DOI å…³è”å®ç°è·¨æºç¼“å­˜å‘½ä¸­ï¼š

```
embedding_cache.db
â”œâ”€â”€ embedding_cache    # text_hash -> embedding (ä¸»è¡¨)
â””â”€â”€ doi_cache_map      # DOI -> text_hash (è·¨æºå…³è”)
```

å³ä½¿æ¸…ç©º `seen.json` é‡è·‘ï¼Œå‘é‡è®¡ç®—ä¹Ÿä¸ä¼šé‡å¤ã€‚

è¯¦ç»†æ–‡æ¡£: [docs/Backend.md](docs/Backend.md)

---

## ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

### Phase 1: å°ç¨‹åºå‰ç«¯ (MVP) - å¼€å‘ä¸­

**ç›®æ ‡**: å¾®ä¿¡å°ç¨‹åºå±•ç¤ºæ—¥æŠ¥

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è¯´æ˜ |
|------|--------|------|------|
| é¦–é¡µåˆ—è¡¨ | P0 | ğŸ”„ | å±•ç¤ºå½“æ—¥æ–‡ç« ï¼ŒæŒ‰åˆ†æ•°æ’åº |
| æ–‡ç« è¯¦æƒ… | P0 | ğŸ”„ | æ ‡é¢˜ + æ‘˜è¦ + åŸæ–‡é“¾æ¥ |
| å†å²æ—¥æœŸ | P1 | ğŸ”„ | é€‰æ‹©æ—¥æœŸæŸ¥çœ‹å†å²æ—¥æŠ¥ |
| æ”¶è—åŠŸèƒ½ | P1 | ğŸ”„ | æ”¶è—/å–æ¶ˆæ”¶è—æ–‡ç«  |
| ç‰ˆæœ¬åˆ‡æ¢ | P2 | â³ | åŒä¸€å¤©å¤šç‰ˆæœ¬åˆ‡æ¢ |
| ä¸‹æ‹‰åˆ·æ–° | P1 | â³ | åˆ·æ–°å½“æ—¥æ•°æ® |

**æŠ€æœ¯æ ˆ**: å¾®ä¿¡å°ç¨‹åºåŸç”Ÿ

### Phase 2: ç”¨æˆ·ç³»ç»Ÿ - åç«¯å·²å®Œæˆ

**ç›®æ ‡**: ä¸ªæ€§åŒ–æ¨èåŸºç¡€

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è¯´æ˜ |
|------|--------|------|------|
| é™é»˜ç™»å½• | P1 | âœ… | wx.login() + JWT |
| æ”¶è—åŠŸèƒ½ | P1 | âœ… | æ”¶è—/å–æ¶ˆæ”¶è—/åˆ—è¡¨ |
| åé¦ˆæ”¶é›† | P1 | â³ | ç‚¹èµ/ç‚¹è¸© |
| é˜…è¯»å†å² | P2 | â³ | è®°å½•å·²è¯»æ–‡ç«  |

**è®¤è¯æµç¨‹**

```
å°ç¨‹åº wx.login() â†’ code
    â†“
POST /api/auth/wx-login {code}
    â†“
åç«¯è°ƒç”¨å¾®ä¿¡æ¥å£æ¢å– openid
    â†“
ç”Ÿæˆ JWT token (7 å¤©æœ‰æ•ˆ)
    â†“
å°ç¨‹åºå­˜å‚¨ token
    â†“
åç»­è¯·æ±‚ Authorization: Bearer {token}
```

**æ•°æ®å­˜å‚¨**

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `data/users.json` | ç”¨æˆ·ä¿¡æ¯ (openid, ç™»å½•æ—¶é—´, æ¬¡æ•°) |
| `data/bookmarks.json` | æ”¶è—è®°å½• (æŒ‰ openid åˆ†ç»„) |

### Phase 3: ç”¨æˆ·äº’åŠ¨å¢å¼º

**ç›®æ ‡**: ä¸°å¯Œç”¨æˆ·äº¤äº’åŠŸèƒ½

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|--------|------|
| ç‚¹èµ/ç‚¹è¸©åé¦ˆ | P1 | æ–‡ç« è¯„ä»·ï¼Œç”¨äºæ”¹è¿›æ¨è |
| é˜…è¯»å†å² | P2 | è®°å½•å·²è¯»æ–‡ç« ï¼Œé¿å…é‡å¤æ¨è |
| æ”¶è—å¤¹åˆ†ç±» | P2 | æ”¯æŒå¤šä¸ªæ”¶è—å¤¹ |
| å¤‡æ³¨ç¼–è¾‘ | P3 | ç¼–è¾‘æ”¶è—å¤‡æ³¨ |

### Phase 4: ä¸ªæ€§åŒ–æ¨è - å·²å®Œæˆ âœ…

**ç›®æ ‡**: åŸºäºç”¨æˆ·é…ç½®çš„ä¸ªæ€§åŒ–æ¨è

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | çŠ¶æ€ | è¯´æ˜ |
|------|--------|------|------|
| ç”¨æˆ·é…ç½®ç³»ç»Ÿ | P1 | âœ… | VIP å…³é”®è¯ + è¯­ä¹‰é”šç‚¹å­˜å‚¨ |
| å€™é€‰æ± æ¶æ„ | P1 | âœ… | Layer1 é€šè¿‡æ–‡ç« ä¿å­˜ä¾›ä¸ªæ€§åŒ– |
| ä¸ªæ€§åŒ–æ’åº | P1 | âœ… | æŒ‰ç”¨æˆ·é”šç‚¹é‡æ’åº |
| å…³é”®è¯è®¢é˜… | P1 | âœ… | ç”¨æˆ·è‡ªå®šä¹‰ VIP å…³é”®è¯ (ä¸‰å±‚) |
| æŒ‰éœ€ LLM | P1 | âœ… | ä¸ªæ€§åŒ–ç»“æœæŒ‰éœ€ç”Ÿæˆæ‘˜è¦ |
| æ¨é€é€šçŸ¥ | P3 | â³ | VIP å…³é”®è¯å‘½ä¸­æ—¶æ¨é€ |

**ä¸ªæ€§åŒ–è¯„åˆ†æœºåˆ¶**

```
personalized_score = base_score Ã— vip_mult Ã— neg_penalty

- base_score: ä¸ç”¨æˆ·æ­£å‘é”šç‚¹çš„æœ€å¤§ä½™å¼¦ç›¸ä¼¼åº¦
- vip_mult: ç”¨æˆ· VIP å…³é”®è¯åŠ æˆ (tier1=1.50, tier2=1.30, tier3=1.15)
- neg_penalty: ç”¨æˆ·è´Ÿå‘é”šç‚¹æƒ©ç½š (ç›¸ä¼¼åº¦ > 0.38 æ—¶é™ 40%)

ç”¨æˆ·æ— è‡ªå®šä¹‰é…ç½®æ—¶ï¼Œä½¿ç”¨ç³»ç»Ÿé»˜è®¤åˆ†æ•°ã€‚
```

**æ•°æ®å­˜å‚¨**

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `data/user_configs/{openid}.json` | ç”¨æˆ·ä¸ªæ€§åŒ–é…ç½® |
| `output/archive/{date}/candidates.json` | å€™é€‰æ±  (Layer1 é€šè¿‡) |

**å®‰å…¨é™åˆ¶**

| é™åˆ¶ | å€¼ | è¯´æ˜ |
|------|---|------|
| å•æ¡é”šç‚¹é•¿åº¦ | 3000 å­—ç¬¦ | è¶…å‡ºè‡ªåŠ¨æˆªæ–­ |
| é”šç‚¹æ•°é‡ä¸Šé™ | 50 æ¡ | è¶…å‡ºä¸¢å¼ƒæœ€æ—§çš„ |

æ”¶è—æ— é™åˆ¶ï¼Œä½†åŒæ­¥åˆ°é”šç‚¹æ—¶å—ä¸Šè¿°é™åˆ¶ã€‚

### Phase 5: è¿ç»´å¢å¼º

**ç›®æ ‡**: ç¨³å®šæ€§å’Œå¯è§‚æµ‹æ€§

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|--------|------|
| ç›‘æ§å‘Šè­¦ | P2 | Pipeline å¤±è´¥å‘Šè­¦ |
| æ—¥å¿—åˆ†æ | P3 | ç»“æ„åŒ–æ—¥å¿— + ç»Ÿè®¡ |
| å®šæ—¶ä»»åŠ¡ä¼˜åŒ– | P2 | cron å¤šæ—¶æ®µè§¦å‘ç­–ç•¥ |
| æ•°æ®å¤‡ä»½ | P3 | è‡ªåŠ¨å¤‡ä»½ seen.json + cache |
| ç”¨æˆ·æ•°æ®å¯¼å‡º | P3 | æ”¯æŒç”¨æˆ·å¯¼å‡ºä¸ªäººæ•°æ® |

---

## æŠ€æœ¯å€ºåŠ¡

| é—®é¢˜ | å½±å“ | ä¼˜å…ˆçº§ |
|------|------|--------|
| æµ‹è¯•è¦†ç›–ä¸è¶³ | å›å½’é£é™© | P2 |
| é”™è¯¯å¤„ç†ä¸å®Œå–„ | éƒ¨åˆ†å¼‚å¸¸æœªæ•è· | P2 |
| é…ç½®åˆ†æ•£ | å¤šå¤„ç¡¬ç¼–ç å¸¸é‡ | P3 |
| æ—¥å¿—ä¸å¤Ÿç»“æ„åŒ– | éš¾ä»¥åˆ†æ | P3 |

---

## é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `config/settings.yaml` | LLM + è¯­ä¹‰æ¨¡å‹ + å¾®ä¿¡é…ç½® |
| `config/filter.yaml` | è¿‡æ»¤é˜ˆå€¼ + VIP å…³é”®è¯ |
| `config/semantic_anchors.yaml` | è¯­ä¹‰é”šç‚¹ (åˆ†å±‚) |
| `config/user_profile.yaml` | LLM prompt æ¨¡æ¿ |
| `src/S1_aggregate/sources.yaml` | æ•°æ®æºé…ç½® |

### å¾®ä¿¡é…ç½® (config/settings.yaml)

```yaml
wechat:
  appid: wx1a609eecc9dc6972
  secret: f5b837d3b310ed986804bbbf7cabd4c0
```

---

## è¿è¡Œå‘½ä»¤

```bash
# å®Œæ•´ Pipeline
python main.py

# è·³è¿‡æŠ“å– (ä½¿ç”¨ç¼“å­˜)
python main.py --skip-fetch

# è·³è¿‡ LLM (æµ‹è¯•ç”¨)
python main.py --no-llm

# æŒ‡å®šè¾“å‡ºæ•°é‡
python main.py --top 30

# ä¸ºç‰¹å®šç”¨æˆ·è¿è¡Œ (éš”ç¦» seen è®°å½•)
python main.py --user user123

# å¯åŠ¨ API æœåŠ¡
python api.py

# æœåŠ¡ç®¡ç†
sudo systemctl start scholarpipe-api
sudo systemctl status scholarpipe-api
```

---

## ç›®å½•ç»“æ„

```
rss-push-workflow/
â”œâ”€â”€ main.py                    # Pipeline å…¥å£
â”œâ”€â”€ api.py                     # API æœåŠ¡
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ S1_aggregate/          # æ­¥éª¤1: èšåˆ
â”‚   â”œâ”€â”€ S2_clean/              # æ­¥éª¤2: æ¸…æ´—
â”‚   â”œâ”€â”€ S3_dedup/              # æ­¥éª¤3: å»é‡
â”‚   â”œâ”€â”€ S4_filter/             # æ­¥éª¤4: è¿‡æ»¤
â”‚   â”œâ”€â”€ S5_enrich/             # æ­¥éª¤5: è¡¥å……
â”‚   â”œâ”€â”€ S6_llm/                # æ­¥éª¤6: LLM
â”‚   â”œâ”€â”€ S7_deliver/            # æ­¥éª¤7: è¾“å‡º
â”‚   â”œâ”€â”€ auth.py                # å¾®ä¿¡ç™»å½• + JWT è®¤è¯
â”‚   â”œâ”€â”€ bookmarks.py           # æ”¶è—åŠŸèƒ½ CRUD
â”‚   â”œâ”€â”€ archive.py             # å½’æ¡£æ¨¡å— + å€™é€‰æ± 
â”‚   â”œâ”€â”€ cleanup.py             # æ¸…ç†æ¨¡å—
â”‚   â”œâ”€â”€ user_config.py         # ç”¨æˆ·é…ç½® CRUD
â”‚   â”œâ”€â”€ personalize.py         # ä¸ªæ€§åŒ–æ’åºå¼•æ“
â”‚   â””â”€â”€ infra/                 # åŸºç¡€è®¾æ–½
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                      # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ users.json             # ç”¨æˆ·æ•°æ®
â”‚   â”œâ”€â”€ bookmarks.json         # æ”¶è—æ•°æ®
â”‚   â”œâ”€â”€ seen/                  # å»é‡è®°å½• (æŒ‰ç”¨æˆ·éš”ç¦»)
â”‚   â”‚   â”œâ”€â”€ default.json       # é»˜è®¤ç”¨æˆ· (å®šæ—¶ä»»åŠ¡)
â”‚   â”‚   â””â”€â”€ {openid}.json      # å¾®ä¿¡ç”¨æˆ·
â”‚   â””â”€â”€ user_configs/          # ç”¨æˆ·ä¸ªæ€§åŒ–é…ç½®
â”‚       â””â”€â”€ {openid}.json
â”œâ”€â”€ output/                    # è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ archive/{date}/
â”‚       â”œâ”€â”€ daily_*.json       # æ—¥æŠ¥å½’æ¡£
â”‚       â””â”€â”€ candidates.json    # å€™é€‰æ± 
â”œâ”€â”€ logs/                      # æ—¥å¿—ç›®å½•
â””â”€â”€ docs/                      # æ–‡æ¡£
    â”œâ”€â”€ API.md                 # API æ–‡æ¡£
    â””â”€â”€ Backend.md             # åç«¯æ–‡æ¡£
```

---

## ç¯å¢ƒå˜é‡

| å˜é‡ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|
| `NCBI_EMAIL` | æ˜¯ | PubMed API é‚®ç®± |
| `NCBI_API_KEY` | å¦ | PubMed API Key (æé«˜é™é¢) |
| `DASHSCOPE_API_KEY` | æ¡ä»¶ | DashScope Embedding API |
| `ZHIPU_API_KEY` | æ¡ä»¶ | æ™ºè°± LLM API |
| `SILICONFLOW_API_KEY` | æ¡ä»¶ | SiliconFlow LLM API |
